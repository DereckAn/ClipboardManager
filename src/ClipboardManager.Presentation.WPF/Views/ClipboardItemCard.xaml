<UserControl x:Class="ClipboardManager.Presentation.WPF.Views.ClipboardItemCard"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:ClipboardManager.Presentation.WPF.Views"
             xmlns:viewModels="clr-namespace:ClipboardManager.Application.ViewModels;assembly=ClipboardManager.Application"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance Type=viewModels:ClipboardItemViewModel, IsDesignTimeCreatable=False}"
             d:DesignHeight="80" d:DesignWidth="350"
             Margin="5" Padding="8" Background="{DynamicResource MaterialDesignCardBackground}"
             Cursor="Hand"
             MouseLeftButtonDown="UserControl_MouseLeftButtonDown"> <!-- Para activar item -->

    <UserControl.Effect>
        <DropShadowEffect ShadowDepth="1" BlurRadius="4" Color="#DDDDDD" Opacity="0.3"/>
    </UserControl.Effect>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/> <!-- Icon -->
            <ColumnDefinition Width="*"/>    <!-- Content -->
            <ColumnDefinition Width="Auto"/> <!-- Actions (Pin) -->
        </Grid.ColumnDefinitions>

        <!-- Icono basado en ContentType -->
        <TextBlock Grid.Column="0" Text="{Binding IconGlyph}"
                   FontFamily="Segoe MDL2 Assets" FontSize="24"
                   VerticalAlignment="Center" Margin="0,0,10,0" />

        <!-- Contenido Principal -->
        <StackPanel Grid.Column="1" VerticalAlignment="Center">
            <!-- Preview (Texto, placeholder Imagen, etc.) -->
            <TextBlock Text="{Binding DisplayTextPreview}" FontWeight="SemiBold"
                       TextTrimming="CharacterEllipsis" MaxHeight="40" />
                       <!-- Para imagen: <Image Source="{Binding ImagePreview}" MaxHeight="50" /> -->

            <!-- Timestamp y Fuente (opcional) -->
            <TextBlock Opacity="0.7" FontSize="11" Margin="0,4,0,0">
                <Run Text="{Binding Item.Timestamp, StringFormat='{}{0:g}'}"/>
                <Run Text=" from "/>
                <Run Text="{Binding Item.SourceApplication, TargetNullValue='Unknown'}"/>
            </TextBlock>
        </StackPanel>

        <!-- BotÃ³n de Anclar -->
        <Button Grid.Column="2"
                Style="{StaticResource MaterialDesignFlatButton}" <!-- Estilo opcional -->
                Command="{Binding PinItemCommand}"
                ToolTip="{Binding PinButtonText}"
                VerticalAlignment="Top" Margin="5,0,0,0">
                <!-- Usar Icono para Pin -->
                 <TextBlock FontFamily="Segoe MDL2 Assets"
                            Text="{Binding IsPinned, Converter={StaticResource BooleanToPinIconConverter}}" />
                            <!-- Necesitas BooleanToPinIconConverter -->
        </Button>

    </Grid>
</UserControl>
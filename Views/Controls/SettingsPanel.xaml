<?xml version="1.0" encoding="utf-8"?>
<UserControl
      x:Class="Clipboard.Views.Controls.SettingsPanel"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Clipboard.Views.Controls"
      xmlns:viewmodels="using:Clipboard.ViewModels"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d">

    <ScrollViewer Padding="24" Background="{ThemeResource LayerFillColorDefaultBrush}">
        <StackPanel Spacing="32" MaxWidth="800">

            <!-- Título principal -->
            <TextBlock Text="⚙️ Configuración" 
                        FontSize="24" 
                        FontWeight="Bold" 
                        Margin="0,0,0,16"/>

            <!-- ============ SECCIÓN: GENERAL ============ -->
            <StackPanel Spacing="16">
                <TextBlock Text="🔧 General" 
                            FontSize="18" 
                            FontWeight="SemiBold" 
                            Foreground="{ThemeResource SystemControlForegroundAccentBrush}"/>

                <Border Background="{ThemeResource LayerFillColorAltBrush}" 
                         CornerRadius="8" 
                         Padding="20">
                    <StackPanel Spacing="16">

                        <!-- Máximo elementos en base de datos -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Máximo elementos en base de datos" FontWeight="Medium"/>
                                <TextBlock Text="Elementos más antiguos se eliminarán automáticamente" 
                                            FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                            <NumberBox Grid.Column="1" 
                                        Value="{x:Bind ViewModel.MaxItemsInDatabase, Mode=TwoWay}"
                                        Minimum="100" 
                                        Maximum="100000"
                                        SpinButtonPlacementMode="Inline"/>
                        </Grid>

                        <!-- Tamaño máximo de cache -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Tamaño máximo de cache en memoria" FontWeight="Medium"/>
                                <TextBlock Text="ViewModels mantenidos en memoria para performance" 
                                            FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                            <NumberBox Grid.Column="1" 
                                        Value="{x:Bind ViewModel.MaxCacheSize, Mode=TwoWay}"
                                        Minimum="100" 
                                        Maximum="10000"
                                        SpinButtonPlacementMode="Inline"/>
                        </Grid>

                        <!-- Retención automática -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Retención automática (días)" FontWeight="Medium"/>
                                <TextBlock Text="Eliminar elementos más antiguos que este tiempo" 
                                            FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                            <NumberBox Grid.Column="1" 
                                        Value="{x:Bind ViewModel.RetentionDays, Mode=TwoWay}"
                                        Minimum="1" 
                                        Maximum="365"
                                        SpinButtonPlacementMode="Inline"/>
                        </Grid>

                        <!-- Auto-start con Windows -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Iniciar automáticamente con Windows" FontWeight="Medium"/>
                                <TextBlock Text="La aplicación se ejecutará al iniciar el sistema" 
                                            FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                            <ToggleSwitch Grid.Column="1" 
                                           IsOn="{x:Bind ViewModel.AutoStartWithWindows, Mode=TwoWay}"/>
                        </Grid>

                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- ============ SECCIÓN: HOTKEYS ============ -->
            <StackPanel Spacing="16">
                <TextBlock Text="⌨️ Atajos de teclado" 
                            FontSize="18" 
                            FontWeight="SemiBold" 
                            Foreground="{ThemeResource SystemControlForegroundAccentBrush}"/>

                <Border Background="{ThemeResource LayerFillColorAltBrush}" 
                         CornerRadius="8" 
                         Padding="20">
                    <StackPanel Spacing="16">

                        <!-- Hotkey global -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Abrir clipboard manager" FontWeight="Medium"/>
                                <TextBlock Text="Atajo global para mostrar la aplicación" 
                                            FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                            <TextBox Grid.Column="1" 
                                      Text="{x:Bind ViewModel.GlobalHotkey, Mode=TwoWay}"
                                      PlaceholderText="Ctrl+Shift+V"/>
                            <Button Grid.Column="2" 
                                     Content="Probar" 
                                     Command="{x:Bind ViewModel.TestHotkeyCommand}"
                                     Margin="8,0,0,0"/>
                        </Grid>

                        <!-- Hotkey historial -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="150"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Ir a pestaña Historial" FontWeight="Medium"/>
                                <TextBlock Text="Atajo rápido para mostrar historial" 
                                            FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                            <TextBox Grid.Column="1" 
                                      Text="{x:Bind ViewModel.HistoryHotkey, Mode=TwoWay}"
                                      PlaceholderText="Ctrl+1"/>
                        </Grid>

                        <!-- Hotkey favoritos -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="150"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Ir a pestaña Favoritos" FontWeight="Medium"/>
                                <TextBlock Text="Atajo rápido para mostrar favoritos" 
                                            FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                            <TextBox Grid.Column="1" 
                                      Text="{x:Bind ViewModel.FavoritesHotkey, Mode=TwoWay}"
                                      PlaceholderText="Ctrl+2"/>
                        </Grid>

                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- ============ SECCIÓN: APARIENCIA ============ -->
            <StackPanel Spacing="16">
                <TextBlock Text="🎨 Apariencia" 
                            FontSize="18" 
                            FontWeight="SemiBold" 
                            Foreground="{ThemeResource SystemControlForegroundAccentBrush}"/>

                <Border Background="{ThemeResource LayerFillColorAltBrush}" 
                         CornerRadius="8" 
                         Padding="20">
                    <StackPanel Spacing="16">

                        <!-- Tema -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="150"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Tema de la aplicación" FontWeight="Medium"/>
                                <TextBlock Text="Claro, oscuro o seguir configuración del sistema" 
                                            FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                            <ComboBox Grid.Column="1" 
                                       SelectedItem="{x:Bind ViewModel.SelectedTheme, Mode=TwoWay}"
                                       ItemsSource="{x:Bind ViewModel.ThemeOptions}"
                                       HorizontalAlignment="Stretch"/>
                        </Grid>

                        <!-- Tamaño de fuente -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Tamaño de fuente" FontWeight="Medium"/>
                                <TextBlock Text="Tamaño de texto en la interfaz" 
                                            FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                            <NumberBox Grid.Column="1" 
                                        Value="{x:Bind ViewModel.FontSize, Mode=TwoWay}"
                                        Minimum="10" 
                                        Maximum="24"
                                        SpinButtonPlacementMode="Inline"/>
                        </Grid>

                        <!-- Modo compacto -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Modo compacto" FontWeight="Medium"/>
                                <TextBlock Text="Interfaz más densa con menos espaciado" 
                                            FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                            <ToggleSwitch Grid.Column="1" 
                                           IsOn="{x:Bind ViewModel.CompactMode, Mode=TwoWay}"/>
                        </Grid>

                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- ============ SECCIÓN: CONTENIDO ============ -->
            <StackPanel Spacing="16">
                <TextBlock Text="📋 Contenido" 
                            FontSize="18" 
                            FontWeight="SemiBold" 
                            Foreground="{ThemeResource SystemControlForegroundAccentBrush}"/>

                <Border Background="{ThemeResource LayerFillColorAltBrush}" 
                         CornerRadius="8" 
                         Padding="20">
                    <StackPanel Spacing="16">

                        <TextBlock Text="Tipos de contenido a capturar:" FontWeight="Medium" Margin="0,0,0,8"/>

                        <!-- Checkboxes para tipos de contenido -->
                        <StackPanel Spacing="8">
                            <CheckBox Content="📝 Texto" IsChecked="{x:Bind ViewModel.CaptureText, Mode=TwoWay}"/>
                            <CheckBox Content="🖼️ Imágenes" IsChecked="{x:Bind ViewModel.CaptureImages, Mode=TwoWay}"/>
                            <CheckBox Content="🎨 Colores" IsChecked="{x:Bind ViewModel.CaptureColors, Mode=TwoWay}"/>
                            <CheckBox Content="🔗 URLs y enlaces" IsChecked="{x:Bind ViewModel.CaptureUrls, Mode=TwoWay}"/>
                            <CheckBox Content="💻 Código" IsChecked="{x:Bind ViewModel.CaptureCode, Mode=TwoWay}"/>
                        </StackPanel>

                        <!-- Aplicaciones excluidas -->
                        <StackPanel>
                            <TextBlock Text="Aplicaciones excluidas" FontWeight="Medium" Margin="0,16,0,4"/>
                            <TextBlock Text="No capturar clipboard de estas aplicaciones (separar con comas)" 
                                        FontSize="12" Opacity="0.7" Margin="0,0,0,8"/>
                            <TextBox Text="{x:Bind ViewModel.ExcludedApplications, Mode=TwoWay}"
                                      PlaceholderText="notepad.exe, cmd.exe"
                                      AcceptsReturn="False"/>
                        </StackPanel>

                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- ============ BOTONES DE ACCIÓN ============ -->
            <StackPanel Orientation="Horizontal" 
                         HorizontalAlignment="Right" 
                         Spacing="12" 
                         Margin="0,16,0,32">
                <Button Content="Restaurar por defecto" 
                         Command="{x:Bind ViewModel.RestoreDefaultSettingsCommand}"
                         Style="{ThemeResource DefaultButtonStyle}"/>
                <Button Content="Guardar configuración" 
                         Command="{x:Bind ViewModel.SaveSettingsCommand}"
                         Style="{ThemeResource AccentButtonStyle}"/>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</UserControl>